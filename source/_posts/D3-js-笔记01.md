title: D3.js 笔记01
date: 2016-07-10 19:35:32
tags: [可视化,Web,JS]
categories: Jscript
---
对于做数据的来说，调度器这个东西应该不是陌生概念，数据流就是靠着调度器调度的，然后进行汇总，整合。但是随着调度器上的任务越来越多,任务之间的依赖变得很复杂，而且有时候有一些任务需要用到重要的模型，报表或者邮件日报中，这就要求用到的这些数据任务流需要进行一些优化，但是没有一个任务依赖图做全局参考，优化有时候不是那么好做，所以近期打算使用`D3.js`这个库给现有的调度器做一个任务依赖图，可以更好的把控数流。

### 准备工作
首先需要下载[d3.js官网](https://d3js.org/),下载`d3.zip`文件，解压之后把里面的`d3.min.js`拷贝到项目里面,我的项目目录路径为
```
➜  script git:(web-d3.js) ✗ tree
.
├── hello_world.html
├── js
│   └── d3.min.js
└── README.md
```
`d3.min.js`文件放在项目目录下的的`js`文件夹，先来一个Hello World`,新建一个`hello_world.html`文件，内容如下:
```
<html>
  <head>
        <meta charset="utf-8">
        <title>HelloWorld</title>
  </head>
    <body>
        <p>Hello World 1</p>
        <p>Hello World 2</p>
        <script src="js/d3.min.js" charset="utf-8"></script>
        <script>
        d3.select("body").selectAll("p").text("www.ourd3js.com");
        </script>
    </body>
</html>
```
打开浏览器就可以看到效果，所有的`<p>`标签里面的内容都被替换了。如果换成普通的js来实现也可以，不过得用一个循环，`D3`所做的事就是减轻你的工作量，以及使你的代码十分简单易懂。下面还有个简单的样例,也是类似余替代循环:
```
<html>
<head>
    <meta charset="utf-8">
    <title>HelloWorld</title>
</head>
<body>
<p>Hello World 1</p>
<p>Hello World 2</p>
<script src="js/d3.min.js" charset="utf-8"></script>
<script>
    //选择<body>中所有的<p>，其文本内容为 www.ourd3js.com，选择集保存在变量 p 中
    var p = d3.select("body")
            .selectAll("p")
            .text("www.ourd3js.com");

    //修改段落的颜色和字体大小
    p.style("color", "red")
            .style("font-size", "72px");

</script>
</body>
</html>
```
上面的代码是先将选中的元素赋值给变量`p`，然后通过变量`p`来改变样式，这样可以使代码更整洁。

这里就展示除了`D3.js`的一个很重要的概念:**选择集**,像`de.select()`或`d3.sellectAll()`选择元素返回的对象都是选择集.
除了选择集，`d3.js`还可以链式不停的调用函数`d3.select().selectAll().text()`链式语法。

### 选择 绑定数据
既然是操作数据，当然少不了选择需要操作的元素以及绑定对应的数据到对应的元素上。
#### 选择元素
```
d3.select()：	是选择所有指定元素的第一个
d3.selectAll()：是选择指定元素的全部
```
上面的函数返回的结果都是返回集
